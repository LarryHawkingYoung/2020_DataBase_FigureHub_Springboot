(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9553956e"],{"063f":function(e,t,a){},"6a81":function(e,t,a){},"9a5d":function(e,t,a){"use strict";var r=a("6a81"),i=a.n(r);i.a},f7ec:function(e,t,a){"use strict";var r=a("063f"),i=a.n(r);i.a},f82f:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-layout",[a("MySidebar",{attrs:{head_index:"3"}}),a("a-layout",{staticClass:"pbbml"},[a("MyBread",{attrs:{first:"百科管理",second:"手办模型"}}),a("GCollection")],1)],1)},i=[],o=a("b8a9"),n=a("f594"),l=a("a92f"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"flextitle"},[a("div",[a("a-button",{attrs:{type:"primary",shape:"round"},on:{click:e.addItem}},[e._v("添加")])],1),a("div",[a("a-input-group",{staticStyle:{width:"400px"}},[a("a-select",{staticStyle:{width:"18%"},attrs:{"default-value":"0"},on:{change:e.selectChange}},[a("a-select-option",{attrs:{value:"0"}},[e._v(" 名称")]),a("a-select-option",{attrs:{value:"1"}},[e._v(" 类型")]),a("a-select-option",{attrs:{value:"2"}},[e._v(" 价格")])],1),a("a-input-search",{staticStyle:{width:"82%"},attrs:{placeholder:"请输入要搜索的关键词","allow-clear":"","enter-button":""},on:{search:e.searchModal}})],1)],1)]),a("collection-create-form",{ref:"collectionForm",attrs:{visible:e.visible},on:{cancel:e.handleCancel,create:e.handleCreate}}),a("div",[a("a-table",{attrs:{bordered:"",pagination:e.pagination,columns:e.columns,"data-source":e.data,loading:e.loading,rowKey:"figureId"},scopedSlots:e._u([{key:"operation",fn:function(t,r){return[a("a-button",{attrs:{type:"link"},on:{click:function(t){return e.updateModal(r)}}},[e._v("修改")]),a("a-button",{attrs:{type:"link"},on:{click:function(t){return e.uploadModal(r)}}},[e._v("传图")]),e.data.length?a("a-popconfirm",{attrs:{title:"确定要删除吗?","ok-text":"确定","cancel-text":"取消"},on:{confirm:function(){return e.onDelete(r.figureId)}}},[a("a-button",{attrs:{type:"link",click:"javascript:;"}},[e._v("删除")])],1):e._e()]}}])}),a("update-form",{ref:"updateForm",attrs:{visible:e.updatevisible,recorder:e.updateRecorder},on:{cancel:e.updateCancel,create:e.updateCreate}}),a("upload-image-form",{ref:"uploadForm",attrs:{visible:e.uploadvisible,recorder:e.uploadRecorder},on:{cancel:e.uploadCancel,create:e.uploadCreate}})],1)],1)},c=[],u=(a("7db0"),a("d3b7"),a("25f0"),a("2909")),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{visible:e.visible,title:"创建新项目",okText:"创建",cancelText:"取消"},on:{cancel:function(){e.$emit("cancel")},ok:function(){e.$emit("create")}}},[a("a-form",{attrs:{layout:"vertical",form:e.form}},[a("a-form-item",{attrs:{label:"模型名称"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["figureName",{rules:[{required:!0,message:"模型名称不能为空！"}]}],expression:"[\n          'figureName',\n          {\n            rules: [{ required: true, message: '模型名称不能为空！' }],\n          },\n        ]"}]})],1),a("a-form-item",{attrs:{label:"模型类型"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["figureType",{setFieldsValue:e.selectType}],expression:"[\n          'figureType',\n          {\n            setFieldsValue: selectType,\n          },\n        ]"}],staticStyle:{width:"100%"},on:{change:e.selectChange}},[a("a-select-option",{attrs:{value:"1"}},[e._v(" GK手办 ")]),a("a-select-option",{attrs:{value:"2"}},[e._v(" PVC手办 ")]),a("a-select-option",{attrs:{value:"3"}},[e._v(" 可动手办 ")]),a("a-select-option",{attrs:{value:"4"}},[e._v(" 景品手办 ")]),a("a-select-option",{attrs:{value:"5"}},[e._v(" 粘土人 ")]),a("a-select-option",{attrs:{value:"0"}},[e._v(" 未知 ")])],1)],1),a("a-form-item",{attrs:{label:"模型价格"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["price",{rules:[{pattern:/^\d*$/,message:"模型价格应该是数字！"}]}],expression:"[\n          'price',\n          { rules: [{ pattern: /^\\d*$/, message: '模型价格应该是数字！' }] },\n        ]"}]})],1),a("a-form-item",{attrs:{label:"模型比例"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["prop"],expression:"['prop']"}]})],1)],1)],1)},p=[],f={props:["visible"],data:function(){return{selectType:""}},beforeCreate:function(){this.form=this.$form.createForm(this,{name:"form_in_modal"})},methods:{selectChange:function(e){this.selectType=e}}},m=f,v=a("2877"),h=Object(v["a"])(m,d,p,!1,null,null,null),g=h.exports,y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-modal",{attrs:{visible:e.visible,title:"修改项目",okText:"修改",cancelText:"取消",destroyOnClose:""},on:{cancel:function(){e.$emit("cancel")},ok:function(){e.$emit("create")}}},[a("a-form",{attrs:{layout:"vertical",form:e.form}},[a("a-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"figureId"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["figureId",{initialValue:e.recorder.figureId}],expression:"['figureId', { initialValue: recorder.figureId }]"}],attrs:{type:"textarea"}})],1),a("a-form-item",{attrs:{label:"模型名称"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["figureName",{rules:[{required:!0,message:"模型名称不能为空！"}],initialValue:e.recorder.figureName}],expression:"[\n            'figureName',\n            {\n              rules: [{ required: true, message: '模型名称不能为空！' }],\n              initialValue: recorder.figureName,\n            },\n          ]"}]})],1),a("a-form-item",{attrs:{label:"模型类型"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["figureType",{setFieldsValue:e.selectType,initialValue:e.recorder.figureType}],expression:"[\n            'figureType',\n            {\n              setFieldsValue: selectType,\n              initialValue: recorder.figureType,\n            },\n          ]"}],staticStyle:{width:"100%"},on:{change:e.selectChange}},e._l(e.list,(function(t){return a("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])})),1)],1),a("a-form-item",{attrs:{label:"模型价格"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["price",{rules:[{pattern:/^\d*$/,message:"模型价格应该是数字！"}],initialValue:e.recorder.price}],expression:"[\n            'price',\n            {\n              rules: [{ pattern: /^\\d*$/, message: '模型价格应该是数字！' }],\n              initialValue: recorder.price,\n            },\n          ]"}]})],1),a("a-form-item",{attrs:{label:"模型比例"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["prop",{initialValue:e.recorder.prop}],expression:"[\n            'prop',\n            {\n              initialValue: recorder.prop,\n            },\n          ]"}]})],1)],1)],1)],1)},b=[],_={props:["visible","recorder"],beforeCreate:function(){this.form=this.$form.createForm(this,{name:"update_form_in_modal2"})},data:function(){return{selectType:"",list:[{id:1,name:"GK手办"},{id:2,name:"PVC手办"},{id:3,name:"可动手办"},{id:4,name:"景品手办"},{id:5,name:"粘土人"},{id:0,name:"未知"}]}},methods:{selectChange:function(e){this.selectType=e}}},T=_,w=Object(v["a"])(T,y,b,!1,null,null,null),x=w.exports,C=a("e91a"),N=(a("bc3a"),a("0c6d")),$={components:{CollectionCreateForm:g,UpdateForm:x,UploadImageForm:C["a"]},data:function(){return{pagination:{defaultPageSize:7,showTotal:function(e){return"共".concat(e,"条数据")}},columns:[{title:"名称",dataIndex:"figureName",key:"figureName"},{title:"类型",dataIndex:"figureTypeStr",key:"figureTypeStr",width:"10%"},{title:"价格",dataIndex:"price",key:"price",width:"10%"},{title:"比例",dataIndex:"prop",key:"prop",width:"10%"},{title:"厂商",dataIndex:"manuName",key:"manuName",width:"10%"},{title:"操作",width:"20%",dataIndex:"operation",scopedSlots:{customRender:"operation"}}],data:[],roleData:[],visible:!1,updatevisible:!1,loading:!1,searchType:0,updateRecorder:{},uploadRecorder:{},uploadTime:0,uploadvisible:!1}},methods:{formData:function(){for(var e=this,t=0;t<e.data.length;t++){var a=e.data[t].figureType;e.data[t].figureId;e.data[t].figureTypeStr=1==a?"GK手办":2==a?"PVC手办":3==a?"可动手办":4==a?"景品手办":5==a?"粘土人":"未知"}},selectChange:function(e){this.searchType=e,console.log(this.searchType)},onCellChange:function(e,t,a){var r=Object(u["a"])(this.dataSource),i=r.find((function(t){return t.key===e}));i&&(i[t]=a,this.dataSource=r)},onDelete:function(e){var t=this;console.log(e);var a=this;N["a"].delete_with_params(a.$store,"/figure/delete?figureId="+e,null).then((function(e){console.log(e);var a=t;a.loading=!0,a.queryTable()}))},addItem:function(){console.log("show"),this.visible=!0},searchModal:function(e){if(e&&""!==e){var t={},a="";console.log(this.searchType),0==this.searchType?(t={figureName:e},a="/figure/selectByName?"):1==this.searchType?(t={figureType:e},a="/figure/selectByType?"):(t={price:e},a="/figure/selectByPrice?");var r=this;r.loading=!0,N["a"].get_with_params(r.$store,a,t).then((function(e){r.data=e,r.formData(),r.loading=!1})).catch((function(e){alert(e)}))}else this.queryTable()},updateModal:function(e){this.updateRecorder=e,this.updatevisible=!0},uploadModal:function(e){this.uploadvisible=!0,this.uploadRecorder=e},uploadCreate:function(){var e=this,t=this.$refs.uploadForm.fileList,a=this.uploadRecorder.figureId.toString();this.uploadTime=t.length,console.log("image"),console.log(t[0]),this.axios_upload(0,a,t).then((function(){e.$refs.uploadForm.fileList=[],e.uploadvisible=!1}))},axios_upload:function(e,t,a){if(e!=a.length){var r=this;return N["a"].post_with_file(this.$store,"/figureimg/insert?figureId="+t,null,a[e].originFileObj).then((function(i){return r.axios_upload(e+1,t,a)}))}},uploadCancel:function(){this.uploadvisible=!1},handleCancel:function(){this.visible=!1},updateCancel:function(){this.updatevisible=!1},updateCreate:function(){var e=this,t=this.$refs.updateForm.form;t.validateFields((function(a,r){if(!a){var i={figureId:r.figureId,figureName:r.figureName,figureType:r.figureType,price:r.price,prop:r.prop};console.log("update test ",r);var o=e;N["a"].put_with_params(o.$store,"/figure/update?",i).then((function(e){console.log(e),o.loading=!0,o.queryTable()})),t.resetFields(),e.updatevisible=!1}}))},handleCreate:function(){var e=this,t=this.$refs.collectionForm.form;t.validateFields((function(a,r){if(!a){console.log("Received values of form: ",r);var i={figureName:r.figureName,figureType:r.figureType,price:r.price,prop:r.prop},o=e;N["a"].post_with_params(o.$store,"/figure/insert?",i).then((function(e){o.loading=!0,o.queryTable()})),t.resetFields(),e.visible=!1}}))},queryTable:function(){var e=this.$createElement,t=this;t.loading=!0,N["a"].get_with_params(t.$store,"/figure/selectAll",null).then((function(e){console.log(e),t.data=e,t.formData(),t.loading=!1})).catch((function(a){console.log("error case!"),console.log(a),t.$notification.open({message:"无法获取GK表格数据",icon:e("a-icon",{attrs:{type:"warning"},style:"color: #ff1820"}),description:"请检查后端是否正常运行，是否允许跨域；或修改main.js中的axios全局参数，以匹配后端Api",duration:10})}))}},created:function(){this.queryTable(),console.log(this.data)}},k=$,I=(a("9a5d"),Object(v["a"])(k,s,c,!1,null,null,null)),F=I.exports,V={components:{MyHeader:o["default"],MySidebar:n["a"],MyBread:l["a"],GCollection:F}},S=V,M=(a("f7ec"),Object(v["a"])(S,r,i,!1,null,null,null));t["default"]=M.exports}}]);
//# sourceMappingURL=chunk-9553956e.a706a1e5.js.map