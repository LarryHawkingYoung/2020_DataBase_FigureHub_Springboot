(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2aba6c96"],{"0993":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-layout",[a("MySidebar",{attrs:{head_index:"5"}}),a("a-layout",{staticClass:"pbbml"},[a("MyBread",{attrs:{first:"百科管理",second:"作品信息"}}),a("WorkCollection")],1)],1)},o=[],n=a("b8a9"),i=a("f594"),l=a("a92f"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"flextitle"},[a("div",[a("a-button",{attrs:{type:"primary",shape:"round"},on:{click:e.addItem}},[e._v("添加")])],1),e._e()]),a("collection-create-form",{ref:"collectionForm",attrs:{visible:e.visible},on:{cancel:e.handleCancel,create:e.handleCreate}}),a("div",[a("a-table",{attrs:{bordered:"",pagination:e.pagination,columns:e.columns,"data-source":e.data,loading:e.loading,rowKey:"workName"},scopedSlots:e._u([{key:"operation",fn:function(t,r){return[a("a-button",{attrs:{type:"link"},on:{click:function(t){return e.updateModal(r)}}},[e._v("修改")]),e.data.length?a("a-popconfirm",{attrs:{title:"确定要删除吗?","ok-text":"确定","cancel-text":"取消"},on:{confirm:function(){return e.onDelete(r.workName)}}},[a("a-button",{attrs:{type:"link",click:"javascript:;"}},[e._v("删除")])],1):e._e()]}}])}),a("update-form",{ref:"updateForm",attrs:{visible:e.updatevisible,recorder:e.updateRecorder},on:{cancel:e.updateCancel,create:e.updateCreate}})],1)],1)},c=[],d=(a("7db0"),a("2909")),u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{visible:e.visible,title:"创建新项目",okText:"创建",cancelText:"取消"},on:{cancel:function(){e.$emit("cancel")},ok:function(){e.$emit("create")}}},[a("a-form",{attrs:{layout:"vertical",form:e.form}},[a("a-form-item",{attrs:{label:"作品名称"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["workName",{rules:[{required:!0,message:"角色名称不能为空！"}]}],expression:"[\n          'workName',\n          {\n            rules: [{ required: true, message: '角色名称不能为空！' }],\n          },\n        ]"}]})],1),a("a-form-item",{attrs:{label:"作品类型"}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["kind",{}],expression:"[\n          'kind',\n          {\n            // initialValue: '0',\n          },\n        ]"}]},[a("a-radio",{attrs:{value:"3"}},[e._v("小说")]),a("a-radio",{attrs:{value:"2"}},[e._v("游戏")]),a("a-radio",{attrs:{value:"1"}},[e._v("漫画")]),a("a-radio",{attrs:{value:"0"}},[e._v("动漫")])],1)],1),a("a-form-item",{attrs:{label:"作品介绍"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["intro"],expression:"['intro']"}],attrs:{type:"textarea"}})],1)],1)],1)},m=[],f={props:["visible"],beforeCreate:function(){this.form=this.$form.createForm(this,{name:"form_in_modal"})}},v=f,p=a("2877"),h=Object(p["a"])(v,u,m,!1,null,null,null),b=h.exports,k=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-modal",{attrs:{visible:e.visible,title:"修改项目",okText:"修改",cancelText:"取消",destroyOnClose:""},on:{cancel:function(){e.$emit("cancel")},ok:function(){e.$emit("create")}}},[a("a-form",{attrs:{layout:"vertical",form:e.form}},[a("a-form-item",{attrs:{label:"作品名称"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["workName",{rules:[{required:!0,message:"名称不能为空！"}],initialValue:e.recorder.roleName}],expression:"[\n            'workName',\n            {\n              rules: [{ required: true, message: '名称不能为空！' }],\n              initialValue: recorder.roleName,\n            },\n          ]"}]})],1),a("a-form-item",{attrs:{label:"作品类型"}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["kind",{initialValue:""+e.recorder.gender}],expression:"[\n            'kind',\n            {\n              initialValue: ''+ recorder.gender,\n            },\n          ]"}]},[a("a-radio",{attrs:{value:"3"}},[e._v("小说")]),a("a-radio",{attrs:{value:"2"}},[e._v("游戏")]),a("a-radio",{attrs:{value:"1"}},[e._v("漫画")]),a("a-radio",{attrs:{value:"0"}},[e._v("动漫")])],1)],1),a("a-form-item",{attrs:{label:"介绍"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["intro",{initialValue:e.recorder.intro}],expression:"['intro', { initialValue: recorder.intro }]"}],attrs:{type:"textarea"}})],1)],1)],1)],1)},g=[],w={props:["visible","recorder"],beforeCreate:function(){this.form=this.$form.createForm(this,{name:"update_form_in_modal2"})}},_=w,y=Object(p["a"])(_,k,g,!1,null,null,null),x=y.exports,C=a("e91a"),N=(a("bc3a"),a("0c6d")),$={components:{CollectionCreateForm:b,UpdateForm:x,UploadImageForm:C["a"]},data:function(){return{pagination:{defaultPageSize:7,showTotal:function(e){return"共".concat(e,"条数据")}},columns:[{title:"名称",dataIndex:"workName",key:"workName",width:"15%"},{title:"类别",dataIndex:"kindStr",key:"kindStr",width:"5%"},{title:"介绍",dataIndex:"intro",key:"intro"},{title:"操作",width:"15%",dataIndex:"operation",scopedSlots:{customRender:"operation"}}],data:[],visible:!1,updatevisible:!1,loading:!1,searchType:0,updateRecorder:{}}},methods:{formData:function(){for(var e=0;e<this.data.length;e++){var t=this.data[e].kind;this.data[e].kindStr=0==t?"动画":1==t?"漫画":2==t?"游戏":"小说"}},selectChange:function(e){this.searchType=e,console.log(this.searchType)},onCellChange:function(e,t,a){var r=Object(d["a"])(this.dataSource),o=r.find((function(t){return t.key===e}));o&&(o[t]=a,this.dataSource=r)},onDelete:function(e){var t=this;console.log(e),N["a"].delete_with_params(this.$store,"/work/delete?workName="+e,null).then((function(e){console.log(e);var a=t;a.loading=!0,a.queryTable()}))},addItem:function(){console.log("show"),this.visible=!0},searchModal:function(e){this.$message.error("没写")},updateModal:function(e){console.log("record is ",e),this.updateRecorder=e,this.updatevisible=!0},handleCancel:function(){this.visible=!1},updateCancel:function(){this.updatevisible=!1},updateCreate:function(){this.$message.error("后端可能有bug")},handleCreate:function(){var e=this,t=this.$refs.collectionForm.form;t.validateFields((function(a,r){if(!a){console.log("Received values of form: ",r);var o={workName:r.workName,kind:r.kind,intro:r.intro};N["a"].post_with_params(e.$store,"/work/insert?",o).then((function(t){console.log(t);var a=e;a.loading=!0,a.queryTable()})),t.resetFields(),e.visible=!1}}))},queryTable:function(){var e=this.$createElement,t=this;t.loading=!0,N["a"].get_with_params(this.$store,"/work/selectAll",null).then((function(e){t.data=e,t.formData(),t.loading=!1})).catch((function(a){console.log("error case!"),t.$notification.open({message:"无法获取Role表格数据",icon:e("a-icon",{attrs:{type:"warning"},style:"color: #ff1820"}),description:"请检查后端是否正常运行，是否允许跨域；或修改main.js中的axios全局参数，以匹配后端Api",duration:10})}))}},created:function(){this.queryTable(),console.log(this.data)}},T=$,F=(a("60b4"),Object(p["a"])(T,s,c,!1,null,null,null)),S=F.exports,q={name:"Work",components:{MyHeader:n["default"],MySidebar:i["a"],MyBread:l["a"],WorkCollection:S}},M=q,j=(a("2a8f"),Object(p["a"])(M,r,o,!1,null,null,null));t["default"]=j.exports},"09c3":function(e,t,a){},"2a8f":function(e,t,a){"use strict";var r=a("09c3"),o=a.n(r);o.a},"60b4":function(e,t,a){"use strict";var r=a("edc2"),o=a.n(r);o.a},edc2:function(e,t,a){}}]);
//# sourceMappingURL=chunk-2aba6c96.b95ff663.js.map