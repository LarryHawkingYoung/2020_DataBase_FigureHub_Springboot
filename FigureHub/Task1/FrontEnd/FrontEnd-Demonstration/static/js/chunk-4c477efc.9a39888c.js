(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4c477efc"],{"21c1":function(e,a,t){"use strict";var r=t("89f4"),o=t.n(r);o.a},"4cee":function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-layout",[t("MySidebar",{attrs:{head_index:"2"}}),t("a-layout",{staticClass:"pbbml"},[t("MyBread",{attrs:{first:"百科管理",second:"角色信息"}}),t("RoleCollection")],1)],1)},o=[],n=t("b8a9"),i=t("f594"),l=t("a92f"),s=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("div",{staticClass:"flextitle"},[t("div",[t("a-button",{attrs:{type:"primary"},on:{click:e.addItem}},[e._v("添加")])],1),t("div",[t("a-input-group",{staticStyle:{width:"400px"}},[t("a-select",{staticStyle:{width:"18%"},attrs:{"default-value":"0"},on:{change:e.selectChange}},[t("a-select-option",{attrs:{value:"0"}},[e._v(" 名称 ")]),t("a-select-option",{attrs:{value:"1"}},[e._v(" 性别 ")])],1),t("a-input-search",{staticStyle:{width:"82%"},attrs:{placeholder:"请输入要搜索的关键词","allow-clear":"","enter-button":""},on:{search:e.searchModal}})],1)],1)]),t("collection-create-form",{ref:"collectionForm",attrs:{visible:e.visible},on:{cancel:e.handleCancel,create:e.handleCreate}}),t("div",[t("a-table",{attrs:{bordered:"",pagination:e.pagination,columns:e.columns,"data-source":e.data,loading:e.loading,rowKey:"roleId"},scopedSlots:e._u([{key:"operation",fn:function(a,r){return[t("a-button",{attrs:{type:"link"},on:{click:function(a){return e.updateModal(r)}}},[e._v("修改")]),e.data.length?t("a-popconfirm",{attrs:{title:"确定要删除吗?","ok-text":"确定","cancel-text":"取消"},on:{confirm:function(){return e.onDelete(r.roleId)}}},[t("a",{attrs:{href:"javascript:;"}},[e._v("删除")])]):e._e()]}}])}),t("update-form",{ref:"updateForm",attrs:{visible:e.updatevisible,recorder:e.updateRecorder},on:{cancel:e.updateCancel,create:e.updateCreate}})],1)],1)},c=[],d=(t("7db0"),t("2909")),u=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-modal",{attrs:{visible:e.visible,title:"创建新项目",okText:"创建",cancelText:"取消"},on:{cancel:function(){e.$emit("cancel")},ok:function(){e.$emit("create")}}},[t("a-form",{attrs:{layout:"vertical",form:e.form}},[t("a-form-item",{attrs:{label:"角色名称"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["roleName",{rules:[{required:!0,message:"角色名称不能为空！"}]}],expression:"[\n          'roleName',\n          {\n            rules: [{ required: true, message: '角色名称不能为空！' }],\n          },\n        ]"}]})],1),t("a-form-item",{attrs:{label:"角色性别"}},[t("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["gender",{}],expression:"[\n          'gender',\n          {\n            // initialValue: '0',\n          },\n        ]"}]},[t("a-radio",{attrs:{value:"2"}},[e._v("女")]),t("a-radio",{attrs:{value:"1"}},[e._v("男")]),t("a-radio",{attrs:{value:"0"}},[e._v("未知")])],1)],1),t("a-form-item",{attrs:{label:"角色介绍"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["intro"],expression:"['intro']"}],attrs:{type:"textarea"}})],1)],1)],1)},f=[],m={props:["visible"],beforeCreate:function(){this.form=this.$form.createForm(this,{name:"form_in_modal"})}},v=m,p=t("2877"),h=Object(p["a"])(v,u,f,!1,null,null,null),g=h.exports,b=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("a-modal",{attrs:{visible:e.visible,title:"修改项目",okText:"修改",cancelText:"取消",destroyOnClose:""},on:{cancel:function(){e.$emit("cancel")},ok:function(){e.$emit("create")}}},[t("a-form",{attrs:{layout:"vertical",form:e.form}},[t("a-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"roleId"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["roleId",{initialValue:e.recorder.roleId}],expression:"['roleId', { initialValue: recorder.roleId }]"}],attrs:{type:"textarea"}})],1),t("a-form-item",{attrs:{label:"角色名称"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["roleName",{rules:[{required:!0,message:"角色名称不能为空！"}],initialValue:e.recorder.roleName}],expression:"[\n            'roleName',\n            {\n              rules: [{ required: true, message: '角色名称不能为空！' }],\n              initialValue: recorder.roleName,\n            },\n          ]"}]})],1),t("a-form-item",{attrs:{label:"角色性别"}},[t("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["gender",{initialValue:""+e.recorder.gender}],expression:"[\n            'gender',\n            {\n              initialValue: ''+ recorder.gender,\n            },\n          ]"}]},[t("a-radio",{attrs:{value:"2"}},[e._v("女")]),t("a-radio",{attrs:{value:"1"}},[e._v("男")]),t("a-radio",{attrs:{value:"0"}},[e._v("未知")])],1)],1),t("a-form-item",{attrs:{label:"角色介绍"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["intro",{initialValue:e.recorder.intro}],expression:"['intro', { initialValue: recorder.intro }]"}],attrs:{type:"textarea"}})],1)],1)],1)],1)},y=[],x={props:["visible","recorder"],beforeCreate:function(){this.form=this.$form.createForm(this,{name:"update_form_in_modal2"})}},w=x,_=Object(p["a"])(w,b,y,!1,null,null,null),N=_.exports,C=t("bc3a"),T=t.n(C),k={components:{CollectionCreateForm:g,UpdateForm:N},data:function(){return{pagination:{defaultPageSize:7,showTotal:function(e){return"共".concat(e,"条数据")}},columns:[{title:"名称",dataIndex:"roleName",key:"roleName",width:"15%"},{title:"性别",dataIndex:"genderStr",key:"genderStr",width:"5%"},{title:"介绍",dataIndex:"intro",key:"intro"},{title:"操作",width:"10%",dataIndex:"operation",scopedSlots:{customRender:"operation"}}],data:[],visible:!1,updatevisible:!1,loading:!1,searchType:0,updateRecorder:{}}},methods:{selectChange:function(e){this.searchType=e,console.log(this.searchType)},onCellChange:function(e,a,t){var r=Object(d["a"])(this.dataSource),o=r.find((function(a){return a.key===e}));o&&(o[a]=t,this.dataSource=r)},onDelete:function(e){var a=this;console.log(e),T.a.delete("/role/delete?roleId="+e).then((function(e){console.log(e);var t=a;t.loading=!0,t.queryTable()}))},addItem:function(){console.log("show"),this.visible=!0},searchModal:function(e){if(e&&""!=e)if(0==this.searchType){console.log("searchType 0");var a={roleName:e};console.log(a);var t=this;t.loading=!0,T.a.get("/role/selectByName?",{params:a}).then((function(e){t.data=e.data;for(var a=0;a<t.data.length;a++){console.log(t.data[a].gender);var r=t.data[a].gender;t.data[a].genderStr=2==r?"女":1==r?"男":"未知"}t.loading=!1})).catch((function(e){alert(e)}))}else{console.log("searchType 1");var r="0";r="女"==e?"2":(r="1")?"1":"0";var o={gender:r};console.log(o);var n=this;n.loading=!0,T.a.get("/role/selectByGender?",{params:o}).then((function(e){n.data=e.data;for(var a=0;a<n.data.length;a++){console.log(n.data[a].gender);var t=n.data[a].gender;n.data[a].genderStr=2==t?"女":1==t?"男":"未知"}n.loading=!1})).catch((function(e){alert(e)}))}else this.queryTable()},updateModal:function(e){console.log("record is ",e),this.updateRecorder=e,this.updatevisible=!0},handleCancel:function(){this.visible=!1},updateCancel:function(){this.updatevisible=!1},updateCreate:function(){var e=this,a=this.$refs.updateForm.form;a.validateFields((function(t,r){if(!t){var o={roleId:r.roleId,roleName:r.roleName,gender:r.gender,intro:r.intro};T.a.put("/role/update?",null,{params:o}).then((function(a){console.log(a);var t=e;t.loading=!0,t.queryTable()})),a.resetFields(),e.updatevisible=!1}}))},handleCreate:function(){var e=this,a=this.$refs.collectionForm.form;a.validateFields((function(t,r){if(!t){console.log("Received values of form: ",r);var o={roleName:r.roleName,gender:r.gender,intro:r.intro};T.a.post("/role/insert?",null,{params:o}).then((function(a){console.log(a);var t=e;t.loading=!0,t.queryTable()})),a.resetFields(),e.visible=!1}}))},queryTable:function(){var e=this.$createElement,a=this;a.loading=!0,T.a.get("/role/selectAll").then((function(e){a.data=e.data;for(var t=0;t<a.data.length;t++){console.log(a.data[t].gender);var r=a.data[t].gender;a.data[t].genderStr=2==r?"女":1==r?"男":"未知"}a.loading=!1})).catch((function(t){console.log("error case!"),a.$notification.open({message:"无法获取Role表格数据",icon:e("a-icon",{attrs:{type:"warning"},style:"color: #ff1820"}),description:"请检查后端是否正常运行，是否允许跨域；或修改main.js中的axios全局参数，以匹配后端Api",duration:10})}))}},created:function(){this.queryTable(),console.log(this.data)}},I=k,S=(t("21c1"),Object(p["a"])(I,s,c,!1,null,null,null)),$=S.exports,F={components:{MyHeader:n["a"],MySidebar:i["a"],MyBread:l["a"],RoleCollection:$}},q=F,M=(t("6fe6"),Object(p["a"])(q,r,o,!1,null,null,null));a["default"]=M.exports},"6fe6":function(e,a,t){"use strict";var r=t("9072"),o=t.n(r);o.a},"89f4":function(e,a,t){},9072:function(e,a,t){}}]);
//# sourceMappingURL=chunk-4c477efc.9a39888c.js.map